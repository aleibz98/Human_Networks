---
title: "Assingment_2"
output: html_document
date: "2023-03-15"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
# libraries
library(igraph)
library(RColorBrewer)
library(visNetwork)
```

```{r}
highschool_edge<-read.csv("Highschool_network_edge.csv",header=FALSE)
highschool_att<-read.csv("Highschool_network_att.csv",header = TRUE)
facebook_edge<-read.csv("Facebook_network_edge.csv",header=FALSE) 
facebook_att<-read.csv("Facebook_network_att.csv",header = TRUE)
```

```{r}
highschool_nodes<-data.frame(name=as.character(highschool_att$NodeID),
                             gender=as.character(highschool_att$Gender),
                             hall=as.character(highschool_att$Hall))

highschool_edges<-data.frame(from=c(as.character(highschool_edge[,1])),
                             to=c(as.character(highschool_edge[,2])))

Highschool<-graph_from_data_frame(highschool_edges,directed = FALSE,vertices = highschool_nodes)

co <- components(Highschool)

Highschool <- induced.subgraph(Highschool, which(co$membership == which.max(co$csize))) #use only the largest component for analysis
summary(Highschool)
```

```{r}
#build facebook network 
facebook_nodes<-data.frame(name=as.character(facebook_att$NodeID))

facebook_edges<-data.frame(from=c(as.character(facebook_edge[,1])),
                           to=c(as.character(facebook_edge[,2])))

Facebook<-graph_from_data_frame(facebook_edges,directed = FALSE,vertices = facebook_nodes)

summary(Facebook)
```

## Node-level Centrality Measures

Question 1 (3 points):

• Find out the node ID of 
  a) highest degree 
  b) highest betweenness 
  c) highest closeness
  d) highest eigenvector in the Highschool network;

• Highlight the above nodes in the Highschool network;

• Explain why these metrics identify the same node or different nodes as the most
central one.


```{r}
#function to calculate centrality metrics 
degree(Highschool, mode = "all")

closeness(Highschool, normalized = TRUE)

betweenness(Highschool, directed = FALSE, normalized = TRUE)

eigen_centrality(Highschool)
```

```{r}
#function to visualize the network (with interaction) 
set.seed(100)
Highschool_interactive_layout<- visNetwork(data.frame(id=V(Highschool)$name), 
                                           highschool_edges, main = "Highschool",
                                           submain="Can zoom in/out to check the IDs and ties") %>%
  visIgraphLayout(layout = "layout_nicely",smooth = FALSE) %>% visNodes(shape="circle",label = TRUE) %>%
  visOptions(highlightNearest = list(enabled = T, hover = T), nodesIdSelection = T)

Highschool_interactive_layout
```


Question 2 (5 points):

• Study the correlations between a) degree and betweenness, b) degree and closeness, c) degree and eigenvector for all the nodes in the Highschool network;

• Study the correlations between a) degree and betweenness, b) degree and closeness, c) degree and eigenvector for all the nodes in the Facebook network;

• From the above results, how well do different metrics correlate with each other? Which centrality metric will you use and why?


```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```
